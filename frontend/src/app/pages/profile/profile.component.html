<div class="profile-container">
    <mat-card class="profile-card mat-elevation-z6">
        <h1 class="profile-title">Your Profile</h1>

        <div class="profile-picture-container">
            <img [src]="user?.profilePicture || 'assets/default-avatar.png'" alt="Profile Picture"
                class="profile-picture">

            <input type="file" (change)="onProfilePicChange($event)" #fileInput>

            <button mat-mini-fab class="edit-pic-btn" (click)="fileInput.click()" matTooltip="Change picture">
                <mat-icon>edit</mat-icon> </button>
        </div>

        <form [formGroup]="profileForm" (ngSubmit)="onSave()">
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>First Name</mat-label>
                <input matInput formControlName="firstName">
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Last Name</mat-label>
                <input matInput formControlName="lastName">
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Email</mat-label>
                <input matInput formControlName="email" readonly>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Birthday</mat-label>
                <input matInput [value]="user?.birthday | date:'mediumDate'" readonly>
            </mat-form-field>

            <div class="full-width" style="text-align: left; margin-bottom: 15px;">
                <label style="color: gray; font-size: 0.8rem; margin-left: 4px;">Gender</label>
                <mat-radio-group formControlName="gender">
                    <mat-radio-button value="M">Male</mat-radio-button>
                    <mat-radio-button value="F">Female</mat-radio-button>
                    <mat-radio-button value="N">Other</mat-radio-button>
                </mat-radio-group>
            </div>

            <button mat-raised-button class="save-btn" [disabled]="profileForm.invalid">
                Save Changes
            </button>
        </form>

        <div class="profile-stats">
            <h3>Statistics</h3>
            <p><strong>Events created:</strong> {{ user?.events_count || 0 }}</p>
        </div>

        <button mat-raised-button class="map-btn" (click)="goToMap()">
            <mat-icon style="margin-right: 5px;">map</mat-icon> Back to Map
        </button>
    </mat-card>
</div>